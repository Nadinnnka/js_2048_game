var t,e=0,r=!1,n=document.querySelector(".message-start"),o=document.querySelector(".message-lose"),a=document.querySelector(".message-win");function i(){return Array.from({length:4},function(){return[,,,,].fill(0)})}function s(){!function(){t=i(),e=0;for(var r=0;r<4;r++)for(var n=0;n<4;n++)d(document.getElementById(r+"-"+n),t[r][n]);f(),f(),document.getElementById("score").innerText=e,o.style.display="none"}(),n.style.display="none",document.getElementById("startButton").textContent="Restart";var r=document.querySelector(".start");r.classList.remove("start"),r.classList.add("restart")}function d(t,e){t.innerText="",t.className="tile",e>0&&(t.innerText=e.toString(),2048===e&&(r=!0),e<=4096?t.classList.add("x"+e.toString()):t.classList.add("x8192"))}function c(t){return t.filter(function(t){return 0!==t})}function u(t){var r=t;r=c(r);for(var n=0;n<r.length-1;n++)r[n]===r[n+1]&&(r[n]*=2,r[n+1]=0,e+=r[n]);for(r=c(r);r.length<4;)r.push(0);return r}function f(){if(l())for(var e=!1;!e;){var r=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===t[r][n]){t[r][n]=2;var o=document.getElementById(r+"-"+n);o.innerText="2",o.classList.add("x2"),e=!0}}}function l(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(0===t[e][r])return!0;return!1}document.addEventListener("DOMContentLoaded",function(){!function(){t=i();for(var e=0;e<4;e++)for(var r=0;r<4;r++)d(function(t,e){var r=document.createElement("div");return r.id=t+"-"+e,document.getElementById("board").append(r),r}(e,r),t[e][r])}();var e=document.getElementById("startButton");e.textContent="Start",e.addEventListener("click",s)}),document.addEventListener("keyup",function(i){"ArrowLeft"===i.code?function(){for(var e=JSON.stringify(t),r=0;r<4;r++){var n=t[r];n=u(n),t[r]=n;for(var o=0;o<4;o++)d(document.getElementById(r+"-"+o),t[r][o])}JSON.stringify(t)!==e&&f()}():"ArrowRight"===i.code?function(){for(var e=JSON.stringify(t),r=0;r<4;r++){var n=t[r];n.reverse(),n=u(n),t[r]=n.reverse();for(var o=0;o<4;o++)d(document.getElementById(r+"-"+o),t[r][o])}JSON.stringify(t)!==e&&f()}():"ArrowUp"===i.code?function(){for(var e=JSON.stringify(t),r=0;r<4;r++){var n=[t[0][r],t[1][r],t[2][r],t[3][r]];n=u(n);for(var o=0;o<4;o++)t[o][r]=n[o],d(document.getElementById(o+"-"+r),t[o][r])}JSON.stringify(t)!==e&&f()}():"ArrowDown"===i.code&&function(){for(var e=JSON.stringify(t),r=0;r<4;r++){var n=[t[0][r],t[1][r],t[2][r],t[3][r]];n.reverse(),(n=u(n)).reverse();for(var o=0;o<4;o++)t[o][r]=n[o],d(document.getElementById(o+"-"+r),t[o][r])}JSON.stringify(t)!==e&&f()}(),l()||function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(r<3&&t[e][r]===t[e][r+1]||e<3&&t[e][r]===t[e+1][r])return!0;return!1}()||(o.classList.add("text-centered"),setTimeout(function(){o.style.display="block",o.classList.remove("text-centered"),o.classList.add("text-hidden")},1e3),setTimeout(function(){n.textContent='Press "Restart" to begin game. Good luck!',n.style.display="block"},2e3)),r&&(a.style.opacity="1"),document.getElementById("score").innerText=e});
//# sourceMappingURL=index.e5c7fc37.js.map
